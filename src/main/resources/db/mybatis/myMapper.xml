<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.github.hcsp.mybatis.myMapper">
  <select id="getUserByPage" parameterType="HashMap" resultType="User">
    select id,name,tel,address
    from user
    <if test="username != null">
      where name = #{username}
    </if>
    limit #{offset},#{limit}
  </select>
  <select id="countUser" parameterType="String" resultType="int">
    select count(*) from user
    <if test="username != null">
      where name = #{username}
    </if>
  </select>
  <insert id="userBatchInsert" parameterType="Map">
    insert into USER ( NAME, TEL, ADDRESS ) values
    <foreach item="user" collection="users" separator=",">
      ( #{user.name}, #{user.tel}, #{user.address} )
    </foreach>
  </insert>

  <update id="updateUser" parameterType="User">
    update user
    <set>
      <if test="name != null">name = #{name}</if>
      <if test="tel !=null">tel = #{tel}</if>
      <if test="address != null">address = #{address}</if>
    </set>
    where id=#{id}
  </update>

  <delete id="deleteUser" parameterType="int">
    delete
    from USER
    where id = #{id}
  </delete>

  <select id="queryUserById" parameterType="int" resultType="User">
    select * from USER where
    <if test="id !=null">
      id=#{id}
    </if>

  </select>


</mapper>
